{"version":3,"file":"VuePictureVerify.js","sources":["../src/lib/vue-picture-verify.vue?rollup-plugin-vue=script.js","../src/lib/vue-picture-verify.vue","../src/lib/install.js"],"sourcesContent":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n  props: {\n    accuracy: {  // 精度\n      type: Number,\n      default: 5\n    },\n    show: {\n      type: Boolean,\n      defalut: false\n    },\n    imgList:{\n      type: Array,\n      defalut: ()=>([])\n    },\n    originImg:{\n      type: String,\n      default: \"https://picsum.photos/300/150/\",\n      required: false\n    }\n  },\n  mounted () {\n    this.arcInit()\n  },\n  data () {\n    return {\n      pinX: 0,//缺口的x轴\n      pinY: 0,//缺口的Y轴\n      puzzleScale: 15,\n      width: 320,\n      height: 160,\n      blockSize: 50,\n      radius: 10,\n      startX: 0,\n      clientX: 0,\n      moveX: 0,\n      moveFlag: false,\n      loading:false,\n      sliderMianWidth: 0,\n      status:null\n    }\n  },\n  computed: {\n  },\n  methods: {\n     handlereset () {\n      // this.newInit()\n      this.status=null\n      this.moveFlag=false\n      this.startX=0\n      this.clientX=0\n      this.moveX=0\n\n      this.arcInit()\n    },\n    getRandom (min, max) {\n      return Math.ceil(Math.random() * (max - min) + min);\n    },\n    paint (ctx, moveL) {\n      ctx.beginPath();\n      ctx.moveTo(this.pinX, this.pinY);\n      ctx.lineTo(this.pinX + moveL, this.pinY);\n      ctx.arcTo(\n        this.pinX + moveL,//弧的起点的 x 坐标。\n        this.pinY - moveL / 2, //弧的起点的 y 坐标。\n        this.pinX + moveL + moveL / 2,//弧的终点的 x 坐标。\n        this.pinY - moveL / 2, //弧的终点的 y 坐标。\n        moveL / 2 // 弧的半径。\n      );\n      ctx.arcTo(\n        this.pinX + moveL + moveL,\n        this.pinY - moveL / 2,\n        this.pinX + moveL + moveL,\n        this.pinY,\n        moveL / 2\n      );\n      ctx.lineTo(this.pinX + moveL + moveL + moveL, this.pinY);\n      ctx.lineTo(this.pinX + moveL + moveL + moveL, this.pinY + moveL);\n      ctx.arcTo(\n        this.pinX + moveL + moveL + moveL + moveL / 2,\n        this.pinY + moveL,\n        this.pinX + moveL + moveL + moveL + moveL / 2,\n        this.pinY + moveL + moveL / 2,\n        moveL / 2\n      )\n      ctx.arcTo(\n        this.pinX + moveL + moveL + moveL + moveL / 2,\n        this.pinY + moveL + moveL,\n        this.pinX + moveL + moveL + moveL,\n        this.pinY + moveL + moveL,\n        moveL / 2\n      );\n      ctx.lineTo(\n        this.pinX + moveL + moveL + moveL,\n        this.pinY + moveL + moveL + moveL\n      );\n      ctx.lineTo(this.pinX, this.pinY + moveL + moveL + moveL);\n      ctx.lineTo(this.pinX, this.pinY + moveL + moveL);\n\n      ctx.arcTo(\n        this.pinX + moveL / 2,\n        this.pinY + moveL + moveL,\n        this.pinX + moveL / 2,\n        this.pinY + moveL + moveL / 2,\n        moveL / 2\n      );\n      ctx.arcTo(\n        this.pinX + moveL / 2,\n        this.pinY + moveL,\n        this.pinX,\n        this.pinY + moveL,\n        moveL / 2\n      );\n      ctx.lineTo(this.pinX, this.pinY);\n    },\n    onRangeMouseDown (e) {\n      e.preventDefault();\n      this.moveFlag = true\n      this.startX = e.clientX || e.changedTouches[0].clientX;\n      this.clientX = e.clientX || e.changedTouches[0].clientX;\n      this.sliderMianWidth = this.$refs.slider.clientWidth\n    },\n    onRangeMouseMove (e) {\n      if (this.moveFlag) {\n        const movex = (e.clientX || e.changedTouches[0].clientX) - this.startX\n        this.moveX = (movex > 0 ? movex >= this.sliderMianWidth - this.blockSize ? this.sliderMianWidth - this.blockSize : movex : 0)\n      }\n\n    },\n    handleMouseup () {\n      if (this.moveFlag) {\n        this.moveFlag = false\n        this.verify()\n      }\n    },\n    verify () {\n      const x = Math.abs(this.pinX - this.moveX)\n      if(x > this.accuracy){\n        //失败\n        this.status=false\n        this.$emit('fail')\n        setTimeout(()=>{\n          this.handlereset()\n        },1000)\n      }else{\n       // 成功\n        this.status=true \n         this.$emit('success')\n      }\n    },\n    arcInit () {\n      this.loading=true\n      const canvas = this.$refs.tutorial //主图canvas\n      const moveCanvas = this.$refs.moveCanvas //滑块canvas\n      const ctx = canvas.getContext('2d')\n      const moveCtx = moveCanvas.getContext('2d')\n      const moveL = 15\n      this.pinX = this.getRandom(this.blockSize, this.width - this.blockSize - 20); // 留20的边距\n      this.pinY = this.getRandom(20, this.height - this.blockSize - 20); // 主图高度 - 拼图块自身高度 - 20边距\n      ctx.clearRect(0, 0, this.width, this.height);\n      moveCtx.clearRect(0, 0, this.width, this.height);\n      ctx.fillStyle = \"rgba(255,255,255,1)\";\n      const img = document.createElement('img');\n      img.crossOrigin = \"Anonymous\"\n      img.onload = () => {\n        ctx.save();\n        // ctx.globalCompositeOperation = 'source-out';\n        this.paint(ctx, moveL)\n        ctx.closePath();\n         ctx.shadowOffsetX = 0;\n          ctx.shadowOffsetY = 0;\n          ctx.shadowColor = \"#000\";\n          ctx.shadowBlur = 5;\n        ctx.fill();\n        ctx.clip();\n\n        ctx.drawImage(img, 0, 0, this.width, this.height);\n         ctx.globalCompositeOperation = \"source-atop\";\n\n        const imgData = ctx.getImageData(\n          this.pinX -3,\n          this.pinY - 21,\n          this.pinX + this.blockSize,\n          this.pinY + this.blockSize\n        );\n        moveCtx.putImageData(imgData, 0, this.pinY - 20);\n        ctx.restore();\n        ctx.clearRect(0, 0, this.width, this.height);\n\n        ctx.save();\n       \n        this.paint(ctx, moveL)\n        ctx.globalAlpha = 0.7;\n        ctx.fillStyle = \"#ffffff\";\n        ctx.closePath();\n        ctx.shadowColor = \"#000\";\n        ctx.shadowOffsetX = 2;\n        ctx.shadowOffsetY = 2;\n        ctx.shadowBlur = 16;\n        ctx.fill();\n        ctx.restore();\n        ctx.save();\n        ctx.globalCompositeOperation = \"destination-over\";\n        ctx.drawImage(img, 0, 0, this.width, this.height);\n\n        ctx.restore();\n        moveCtx.restore();\n        this.loading=false\n      }\n       img.onerror = () => {\n        this.handlereset()\n      };\n      if(this.imgList && this.imgList.length){\n        img.src = this.getRandom(0, this.imgList.length - 1);\n      }else if(this.originImg){\n        img.src=this.originImg === \"https://picsum.photos/300/150/\" ? this.originImg +`?timestamp${new Date().valueOf()}` : this.originImg\n      }else{\n\n      }\n    }\n  }\n}\n","<template>\n  <div :class=\"['canvas-body', { 'canvas-show': show }]\">\n    <div class=\"canvas-box\" @mousedown.stop @touchstart.stop>\n      <div class=\"vue-picture-canvas\">\n        <svg @click=\"handlereset\" class=\"vue-picture-reset\" width=\"30\" height=\"30\" viewBox=\"0 0 48 48\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M11.2721 36.7279C14.5294 39.9853 19.0294 42 24 42C33.9411 42 42 33.9411 42 24C42 14.0589 33.9411 6 24 6C19.0294 6 14.5294 8.01472 11.2721 11.2721C9.61407 12.9301 6 17 6 17\" stroke=\"#ffffff\" stroke-width=\"3\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/><path d=\"M6 9V17H14\" stroke=\"#ffffff\" stroke-width=\"3\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/></svg>\n        <canvas ref=\"tutorial\" style=\"border:1px solid #ccc\" width=\"300\" height=\"150\"></canvas>\n        <canvas ref=\"moveCanvas\" class=\"moveCanvas\" width=\"60\" :style=\"{ transform: `translateX(${moveX}px)` }\"\n          height=\"150\"></canvas>\n        <div v-if=\"loading\" class=\"vue-picture-loading\">\n           <div class=\"loader\"></div>\n        </div>\n      </div>\n      <div class=\"slider-box\" ref=\"slider\">\n        <div :class=\"['slider-fill',{'verify-success':status,'verify-error':status===false}]\" :style=\"{'width':`${moveX}px`}\"></div>\n        <div :class=\"['slider-main',{'verify-success':status,'verify-error':status===false}]\" :style=\"{ transform: `translateX(${moveX}px)` }\" @mousemove.prevent=\"onRangeMouseMove\"\n          @mouseup=\"handleMouseup\" @touchmove.prevent=\"onRangeMouseMove($event)\"\n          @mousedown=\"onRangeMouseDown($event)\" @touchstart=\"onRangeMouseDown($event)\" @touchend=\"handleMouseup\">\n          <svg v-if=\"status === null\" width=\"30\" height=\"30\" viewBox=\"0 0 48 48\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n            <path d=\"M12 12L24 24L12 36\" stroke=\"#333\" stroke-width=\"1\" stroke-linecap=\"round\"\n              stroke-linejoin=\"round\" />\n            <path d=\"M24 12L36 24L24 36\" stroke=\"#333\" stroke-width=\"1\" stroke-linecap=\"round\"\n              stroke-linejoin=\"round\" />\n          </svg>\n          <svg v-if=\"status\" width=\"30\" height=\"30\" viewBox=\"0 0 48 48\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M4 24L9 19L19 29L39 9L44 14L19 39L4 24Z\" fill=\"#ffffff\" stroke=\"#ffffff\" stroke-width=\"1\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/></svg>\n          <svg width=\"35\" v-if=\"status === false\" height=\"35\" viewBox=\"0 0 48 48\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M6 11L11 6L24 19L37 6L42 11L29 24L42 37L37 42L24 29L11 42L6 37L19 24L6 11Z\" fill=\"#ffffff\" stroke=\"#ffffff\" stroke-width=\"3\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/></svg>\n        </div>\n        <span class=\"slider-text\">请<span style=\"color:#e68045;\">拖动</span>左侧滑块将图片还原</span>\n      </div>\n    </div>\n    \n  </div>\n</template>\n\n<script >\nexport default {\n  props: {\n    accuracy: {  // 精度\n      type: Number,\n      default: 5\n    },\n    show: {\n      type: Boolean,\n      defalut: false\n    },\n    imgList:{\n      type: Array,\n      defalut: ()=>([])\n    },\n    originImg:{\n      type: String,\n      default: \"https://picsum.photos/300/150/\",\n      required: false\n    }\n  },\n  mounted () {\n    this.arcInit()\n  },\n  data () {\n    return {\n      pinX: 0,//缺口的x轴\n      pinY: 0,//缺口的Y轴\n      puzzleScale: 15,\n      width: 320,\n      height: 160,\n      blockSize: 50,\n      radius: 10,\n      startX: 0,\n      clientX: 0,\n      moveX: 0,\n      moveFlag: false,\n      loading:false,\n      sliderMianWidth: 0,\n      status:null\n    }\n  },\n  computed: {\n  },\n  methods: {\n     handlereset () {\n      // this.newInit()\n      this.status=null\n      this.moveFlag=false\n      this.startX=0\n      this.clientX=0\n      this.moveX=0\n\n      this.arcInit()\n    },\n    getRandom (min, max) {\n      return Math.ceil(Math.random() * (max - min) + min);\n    },\n    paint (ctx, moveL) {\n      ctx.beginPath();\n      ctx.moveTo(this.pinX, this.pinY);\n      ctx.lineTo(this.pinX + moveL, this.pinY);\n      ctx.arcTo(\n        this.pinX + moveL,//弧的起点的 x 坐标。\n        this.pinY - moveL / 2, //弧的起点的 y 坐标。\n        this.pinX + moveL + moveL / 2,//弧的终点的 x 坐标。\n        this.pinY - moveL / 2, //弧的终点的 y 坐标。\n        moveL / 2 // 弧的半径。\n      );\n      ctx.arcTo(\n        this.pinX + moveL + moveL,\n        this.pinY - moveL / 2,\n        this.pinX + moveL + moveL,\n        this.pinY,\n        moveL / 2\n      );\n      ctx.lineTo(this.pinX + moveL + moveL + moveL, this.pinY);\n      ctx.lineTo(this.pinX + moveL + moveL + moveL, this.pinY + moveL);\n      ctx.arcTo(\n        this.pinX + moveL + moveL + moveL + moveL / 2,\n        this.pinY + moveL,\n        this.pinX + moveL + moveL + moveL + moveL / 2,\n        this.pinY + moveL + moveL / 2,\n        moveL / 2\n      )\n      ctx.arcTo(\n        this.pinX + moveL + moveL + moveL + moveL / 2,\n        this.pinY + moveL + moveL,\n        this.pinX + moveL + moveL + moveL,\n        this.pinY + moveL + moveL,\n        moveL / 2\n      );\n      ctx.lineTo(\n        this.pinX + moveL + moveL + moveL,\n        this.pinY + moveL + moveL + moveL\n      );\n      ctx.lineTo(this.pinX, this.pinY + moveL + moveL + moveL);\n      ctx.lineTo(this.pinX, this.pinY + moveL + moveL);\n\n      ctx.arcTo(\n        this.pinX + moveL / 2,\n        this.pinY + moveL + moveL,\n        this.pinX + moveL / 2,\n        this.pinY + moveL + moveL / 2,\n        moveL / 2\n      );\n      ctx.arcTo(\n        this.pinX + moveL / 2,\n        this.pinY + moveL,\n        this.pinX,\n        this.pinY + moveL,\n        moveL / 2\n      );\n      ctx.lineTo(this.pinX, this.pinY);\n    },\n    onRangeMouseDown (e) {\n      e.preventDefault();\n      this.moveFlag = true\n      this.startX = e.clientX || e.changedTouches[0].clientX;\n      this.clientX = e.clientX || e.changedTouches[0].clientX;\n      this.sliderMianWidth = this.$refs.slider.clientWidth\n    },\n    onRangeMouseMove (e) {\n      if (this.moveFlag) {\n        const movex = (e.clientX || e.changedTouches[0].clientX) - this.startX\n        this.moveX = (movex > 0 ? movex >= this.sliderMianWidth - this.blockSize ? this.sliderMianWidth - this.blockSize : movex : 0)\n      }\n\n    },\n    handleMouseup () {\n      if (this.moveFlag) {\n        this.moveFlag = false\n        this.verify()\n      }\n    },\n    verify () {\n      const x = Math.abs(this.pinX - this.moveX)\n      if(x > this.accuracy){\n        //失败\n        this.status=false\n        this.$emit('fail')\n        setTimeout(()=>{\n          this.handlereset()\n        },1000)\n      }else{\n       // 成功\n        this.status=true \n         this.$emit('success')\n      }\n    },\n    arcInit () {\n      this.loading=true\n      const canvas = this.$refs.tutorial //主图canvas\n      const moveCanvas = this.$refs.moveCanvas //滑块canvas\n      const ctx = canvas.getContext('2d')\n      const moveCtx = moveCanvas.getContext('2d')\n      const moveL = 15\n      this.pinX = this.getRandom(this.blockSize, this.width - this.blockSize - 20); // 留20的边距\n      this.pinY = this.getRandom(20, this.height - this.blockSize - 20); // 主图高度 - 拼图块自身高度 - 20边距\n      ctx.clearRect(0, 0, this.width, this.height);\n      moveCtx.clearRect(0, 0, this.width, this.height);\n      ctx.fillStyle = \"rgba(255,255,255,1)\";\n      const img = document.createElement('img');\n      img.crossOrigin = \"Anonymous\"\n      img.onload = () => {\n        ctx.save();\n        // ctx.globalCompositeOperation = 'source-out';\n        this.paint(ctx, moveL)\n        ctx.closePath();\n         ctx.shadowOffsetX = 0;\n          ctx.shadowOffsetY = 0;\n          ctx.shadowColor = \"#000\";\n          ctx.shadowBlur = 5;\n        ctx.fill();\n        ctx.clip();\n\n        ctx.drawImage(img, 0, 0, this.width, this.height);\n         ctx.globalCompositeOperation = \"source-atop\";\n\n        const imgData = ctx.getImageData(\n          this.pinX -3,\n          this.pinY - 21,\n          this.pinX + this.blockSize,\n          this.pinY + this.blockSize\n        );\n        moveCtx.putImageData(imgData, 0, this.pinY - 20);\n        ctx.restore();\n        ctx.clearRect(0, 0, this.width, this.height);\n\n        ctx.save();\n       \n        this.paint(ctx, moveL)\n        ctx.globalAlpha = 0.7;\n        ctx.fillStyle = \"#ffffff\";\n        ctx.closePath();\n        ctx.shadowColor = \"#000\";\n        ctx.shadowOffsetX = 2;\n        ctx.shadowOffsetY = 2;\n        ctx.shadowBlur = 16;\n        ctx.fill();\n        ctx.restore();\n        ctx.save();\n        ctx.globalCompositeOperation = \"destination-over\";\n        ctx.drawImage(img, 0, 0, this.width, this.height);\n\n        ctx.restore();\n        moveCtx.restore();\n        this.loading=false\n      }\n       img.onerror = () => {\n        this.handlereset()\n      };\n      if(this.imgList && this.imgList.length){\n        img.src = this.getRandom(0, this.imgList.length - 1);\n      }else if(this.originImg){\n        img.src=this.originImg === \"https://picsum.photos/300/150/\" ? this.originImg +`?timestamp${new Date().valueOf()}` : this.originImg\n      }else{\n\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n.canvas-body {\n  position: fixed;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n  background-color: rgba(0, 0, 0, 0.3);\n  z-index: 999;\n  opacity: 0;\n  pointer-events: none;\n}\n/* canvas{\n  opacity: 0;\n} */\n.vue-picture-loading{\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 9999;\n  background-color: rgba(0, 0, 0);;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.loader{\n  position: relative;\n  width: 50px;\n  height: 50px;\n  border-radius: 50%;\n  background: linear-gradient(45deg,transparent,transparent 40%,#e5f403);\n  z-index: 99999;\n   animation: animate 2s linear infinite;\n}\n.loader::before{\n  content: '';\n  position: absolute;\n  top: 6px;\n  left:6px;\n  right:6px;\n  bottom:6px;\n  background-color: #000;\n  border-radius: 50%;\n  z-index:1000;\n \n}\n\n@keyframes animate {\n  0%{\n    transform: rotate(0deg);\n    filter: hue-rotate(0deg);\n  }\n  0%{\n    transform: rotate(360deg);\n    filter: hue-rotate(360deg);\n  }\n}\n\n.loader::after{\n  content: '';\n  position: absolute;\n  top: 6px;\n  left:6px;\n  right:6px;\n  bottom:6px;\n  background: linear-gradient(45deg,transparent,transparent 40%,#e5f403);\n  border-radius: 50%;\n  z-index:1;\n  filter: blur(30px);\n}\n\n.canvas-show {\n  opacity: 1;\n  pointer-events: auto;\n}\n\n.canvas-box {\n  position: absolute;\n  top: 40%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  padding: 20px;\n  background: #fff;\n  user-select: none;\n  border-radius: 3px;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);\n}\n\n.vue-picture-canvas {\n  position: relative;\n  overflow: hidden;\n  border-radius: 3px;\n}\n.vue-picture-reset{\n  position: absolute;\n  right: 0;\n  top: 0;\n  z-index: 99999;\n}\n\n.moveCanvas {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 60px;\n  /* height: 100%; */\n  z-index: 2;\n}\n\n.slider-box {\n  position: relative;\n  width: 100%;\n  background-color: #eef1f8;\n  margin-top: 20px;\n  border-radius: 3px;\n  box-shadow: 0 0 8px rgba(240, 240, 240, 0.6) inset;\n  height: 50px;\n  display: flex;\n  /* justify-content: space-between; */\n  align-items: center;\n}\n\n.slider-main {\n  position: absolute;\n  left: 0;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 50px;\n  height: 100%;\n  background-color: white;\n  box-shadow: 0 0 4px #ccc;\n  border-top-right-radius: 3px;\n  border-bottom-right-radius: 3px;\n  z-index: 3;\n}\n.slider-fill{\n  background-color: #4c83e3;\n  opacity: 0.7;\n  height: 100%;\n  z-index: 100;\n}\n.verify-success{\n  background-color:#5784dc;\n}\n.verify-error{\n  background-color:#d83a21;\n}\n\n.slider-text {\n  position: absolute;\n  left: 50%;\n  width: 100%;\n  transform: translateX(-50%);\n  font-size: 14px;\n  color: #b7bcd1;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  text-align: center;\n  overflow: hidden;\n\n}\n</style>","import VuePictureVerify from './vue-picture-verify.vue'\nconst plugins = {\n  install(Vue) {\n      Vue.component('VuePictureVerify', VuePictureVerify)\n  }\n}\n\nif (typeof window !== 'undefined' && window.Vue) {\n    window.Vue.use(VuePictureVerify) \n}\n\nexport default plugins\n"],"names":["props","accuracy","type","Number","show","Boolean","defalut","imgList","Array","originImg","String","required","mounted","arcInit","data","pinX","pinY","puzzleScale","width","height","blockSize","radius","startX","clientX","moveX","moveFlag","loading","sliderMianWidth","status","computed","methods","handlereset","getRandom","min","max","Math","ceil","random","paint","ctx","moveL","beginPath","moveTo","lineTo","arcTo","onRangeMouseDown","e","preventDefault","changedTouches","$refs","slider","clientWidth","onRangeMouseMove","movex","handleMouseup","verify","x","abs","$emit","setTimeout","canvas","tutorial","moveCanvas","getContext","moveCtx","clearRect","fillStyle","img","document","createElement","crossOrigin","onload","save","closePath","shadowOffsetX","shadowOffsetY","shadowColor","shadowBlur","fill","clip","drawImage","globalCompositeOperation","imgData","getImageData","putImageData","restore","globalAlpha","onerror","length","src","Date","valueOf","plugins","install","Vue","component","VuePictureVerify","window","use"],"mappings":"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"}